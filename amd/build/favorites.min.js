define(["jquery","core/ajax","core/notification"],function(a,b,c){var d={debugjs:!0,id:0,url:"",hash:""},e=function(a){"use strict";var b,c;for(b in d)d.hasOwnProperty(b)&&a.hasOwnProperty(b)&&(c=typeof d[b],"boolean"===c?d[b]=Boolean(a[b]):"number"===c?d[b]=Number(a[b]):"string"===c&&(d[b]=String(a[b])))},f={},g=function(a){if(a)for(var b in console)"function"==typeof console[b]&&(f[b]=console[b].bind(window.console));else for(var c in console)"function"==typeof console[c]&&(f[c]=function(){})},h={setUrl:function(e,g){c.confirm(M.util.get_string("javascript:set_title","block_user_favorites"),'<input class="form-control" id="favorite-url" value="'+g+'">',M.util.get_string("javascript:yes","block_user_favorites"),M.util.get_string("javascript:no","block_user_favorites"),function(){var g=b.call([{methodname:"block_user_favorites_set_url",args:{hash:e.hash,optional:{url:e.url},title:a("#favorite-url").val(),blockid:d.id}}]);g[0].done(function(a){f.log(a),h.reload()}).fail(c.exception)})},remove:function(a){var e=b.call([{methodname:"block_user_favorites_delete_url",args:{hash:a.hash,blockid:d.id}}]);e[0].done(function(a){f.log(a),h.reload()}).fail(c.exception)},reload:function(){var e=b.call([{methodname:"block_user_favorites_content",args:{url:d.url,blockid:d.id}}]);e[0].done(function(b){f.log(b),a(".block_user_favorites .content").html(b.content)}).fail(c.exception)},init:function(){a(".block_user_favorites").on("click","#block_user_favorites_set",function(){h.setUrl({hash:d.hash,url:d.url},a("title").text())}).on("click","#block_user_favorites_delete",function(){h.remove({hash:d.hash})}).on("click",".fa-remove",function(){h.remove(a(this).closest("li").data())}).on("click",".fa-edit",function(){var b=a(this).parent().parent().data();h.setUrl(b,a(this).parent().parent().find("a").text())})}};return{initialise:function(b){e(b),g(d.debugjs),a.noConflict(),a(document).ready(function(){f.log("Block User Favorites v1.2"),h.init()})}}});